# CSP第三题的练习

# 26届CSP：角色授权
1. 用字典存储角色，详情及关联表均使用`set`实现去重。
2. 读取查询主体及其所属组，通过关联表汇总所有角色。遍历这些角色，利用集合成员检查快速匹配操作、种类和名称，只要有一个角色匹配成功即授权。
---
# 27届CSP：防疫大数据
1. 使用字典存储风险地区（Key为地区，Value为风险起始日列表）；用列表存储所有漫游记录，每轮迭代后剔除接收日期超过 7 天的记录。
2. 若日期落在任一风险起始日的 [d, d+6] 区间则该地有风险。
3. 遍历有效记录，校验接收日、访问日均在7天内，且该地区从访问日到当前日持续处于风险状态，满足即加入集合去重。
---
# 29届CSP：LADP
> **这个基本靠AI了，有点难哎-_-**
1. 建立属性值的倒排索引及属性存在性索引，使用集合存储 DN。 
2. 采用递归下降法解析表达式。遇到逻辑符则递归计算子表达式并执行集合交/并运算；原子表达式则通过索引直接获取集合。反断言需用属性存在集减去值匹配集，确保属性存在。
---
# 34届CSP：文本分词
1. 字典存单词频率、集合去重统计字符，排序输出初始单字母词汇；
2. 字典存单词的字符拆分序列，迭代用字典统计词汇对频率，按规则选最优对；
3. while+指针更新拆分序列，拼接新词汇输出至指定长度。
---
# 36届CSP：缓存模拟
1. **分组定位**：公式 `g_idx = (a // n) % N` 将内存块映射到指定缓存组。
2. **命中处理**：若块已在组内，将其移至列表末尾（更新 LRU 顺序），若是写操作则打上标记。
3. **未命中替换**：若组满，弹出队首最久未用的块，且若有标记，则先执行**写回内存**，随后执行一次**读取内存**，并将新块入队末尾并初始化状态。
---
# 37届CSP：模板展开
1. **找准思路，只计算长度**：发现输出只需长度，不必做字符串拼接。
2. **计算长度**：
   - **直接赋值**：直接计算
   - **间接赋值**：按表达式递归计算
---
# 33届CSP：化学方程式配平
1. 通过字符串处理，将化学式解析为“元素-原子数”字典。
2. 以元素为行、物质为列构建系数矩阵。
3. 对矩阵进行高斯消元，计算其秩。（这是难点，根据题目说明一步一步做就好，但是题目**适当倍数**须推导计算）
---
# 31届CSP：梯度求解
1. 利用**栈**维护二元组(v, dv)，分别代表函数在该点的当前值和对目标变量的偏导数。
2. 遍历逆波兰式，遇到常数或变量则初始化入栈（目标变量dv=1）；遇到运算符则弹出两元素，应用加减法则或**乘法法则** $(uv)' = u'v + uv'$计算新元组并压回。
3. 全过程进行1e9 + 7取模，输出前修正负数余数。

- 常数分支若漏写 `append` 会导致后续算符因缺操作数而报错。
- 减法中先弹出的是右操作数，顺序反了会导致结果正负号错误。
---
# 39届CSP：HTTP头信息
> hard -_- AI助我！！！
1. 预置静态表，使用列表动态维护动态表。新条目插入队首，超出容量则删除队尾（最旧条目）。编号规则为静态表衔接动态表（ $1 \dots S, S+1 \dots S+D$ ）。
2. **Huffman 还原**：通过递归 DFS 算法，利用“0表示分支，1表示叶子”的规则重建二叉树。
3. **字符串解码**：
   - **普通字符串**：处理 `HH` 转义（去掉首个 `H`）。
   - **Huffman 字符串**：将十六进制转为二进制流，按位在树上检索字符，注意根据末尾字节p剔除补零位。
---
# 40届CSP：图片解码
1. 解密是加密的逆过程，需逆序处理密钥序列。
2. 对于第i次加密：若为旋转加密，先将矩阵整体顺时针旋转 $r_i$ 次，再对指定子矩阵执行逆时针 $d_i$ 度旋转；
3. 若为翻转加密，直接对子矩阵执行相同的水平或垂直翻转（翻转的逆操作是其本身）。
4. 最后，通过扫描矩阵中非`r`字符的边界，还原出原始图片的尺寸与内容。
> 这是一个很棒的模板
```python
def rotate_matrix(mat, times):
   """旋转矩阵，times是顺时针旋转90度的次数""" 
   n = len(mat)
   for _ in range(times % 4):
      mat = [list(row) for row in zip(*mat[::-1])]
   return mat
```
